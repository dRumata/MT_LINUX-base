## LAB04-2. Восстановление пароля пользователя root

Если вы загружаете систему RHEL  в систему rescue или emergency target, вам будет предложено ввести пароль root. Но что, если вы забыли пароль? В этом упражнении показаны шаги, необходимые для сброса утерянного пароля для пользователя root. Во время процесса восстановления пароля у вас, вероятно, не будет доступа к документации. Следовательно, вам следует практиковать следующую процедуру до тех пор, пока вы не сможете использовать ее в критической ситуации:

1. Используйте следующую команду, чтобы изменить пароль root на случайную строку. Эта команда скрывает от вас случайный пароль (не выполняйте этот пункт, если не знаете пароль root или он не установлен):

```bash
passwd --stdin root
```

2. Выйдите из своего сеанса. Попробуйте снова войти в систему как пользователь root. Вы не сможете войти в систему со старым известным паролем root.
2. Перезагрузите сервер.
3. Когда вы увидите следующее сообщение, нажмите клавишу, чтобы получить доступ к меню GRUB:
**The selected entry will be started automatically in 5s**.
5. Нажмите **```e```**, чтобы отредактировать текущий пункт меню.
6. Прокрутите вниз с помощью клавиши со стрелкой ВНИЗ, чтобы найти строку, начинающуюся с linux. Нажмите CTRL-E или END, чтобы перейти к концу строки, а затем введите строку **```rd.break```**.
7. Нажмите CTRI-X, чтобы загрузить систему.
8. Директива rd.break прерывает последовательность загрузки до того, как корневая файловая система будет правильно смонтирована. Подтвердите это, запустив **```ls /sysroot```**. Если вы знаете содержимое корневой файловой системы, выходные данные должны выглядеть знакомо.
9. Повторно смонтируйте файловую систему root /sysroot в режиме чтения-записи и измените корневой каталог на /sysroot:

```bash
mount -o remount,rw /sysroot
chroot /sysroot
```

10. Измените пароль root:

```bash
passwd
```

>***Screenshot:***
>
>Cделайте скриншот экрана c результатом выполнения задания для отправки отчета.

11. Поскольку SELinux не запущен, команда passwd не сохраняет контекст файла /etc/passwd. Чтобы убедиться, что файл /etc/passwd помечен правильным контекстом SELinux, прикажите Linux повторно пометить все файлы при следующей загрузке с помощью следующей команды:

```bash
touch /.autorelabel
```

12. Введите exit, чтобы закрыть chroot jail, а затем снова введите exit, чтобы перезагрузить систему.
13. SELinux может потребоваться несколько минут, чтобы повторно пометить все файлы. Как только вы получите приглашение для входа, подтвердите, что вы можете войти в систему как пользователь root.
